<project name="Valve3Web" default="help" basedir=".">
	<description>USGS Valve3Web Build File</description>
	
	<property name="dist-basedir" value="../dist"/>
	<property name="dist-dir" value="Valve3" />
	
	<target name="help">
		<echo>
Available targets:			
help    -- displays this help information
init    --
deploy  -- build usgs.jar file
dist    -- creates a binary distribution
		</echo>
	</target>
	
	<target name="init">
	</target>
	
	<target name="deploy">
		<ant antfile="../USGS/build.xml" target="jar" dir="../USGS" />
	</target>
	
	<target name="dist" depends="deploy">
		<delete dir="${dist-basedir}/${dist-dir}" />
		
		<!-- Create the distribution directory structure -->
		<mkdir dir="${dist-basedir}/${dist-dir}/WEB-INF/" />
		<mkdir dir="${dist-basedir}/${dist-dir}/WEB-INF/config" />
		<mkdir dir="${dist-basedir}/${dist-dir}/WEB-INF/lib" />
		<mkdir dir="${dist-basedir}/${dist-dir}/img/" />
		<mkdir dir="${dist-basedir}/${dist-dir}/images/" />
		<mkdir dir="${dist-basedir}/${dist-dir}/js/" />
		<mkdir dir="${dist-basedir}/${dist-dir}/menu/" />
		
		<!-- Copy the distribution files -->
		<copy todir="${dist-basedir}/${dist-dir}">
			<fileset dir="./web">
				<include name="**/**" />
			</fileset>
		</copy>
				
		<copy todir="${dist-basedir}/${dist-dir}/WEB-INF/lib">
			<fileset dir="../USGS/contrib">
				<include name="colt.jar" />
				<include name="jai_codec.jar" />
				<include name="jai_core.jar" />
				<include name="mlibwrapper_jai.jar" />
			</fileset>
			<fileset dir="../USGS/lib">
				<include name="usgs.jar" />
			</fileset>
		</copy>

		<tar destfile="valve3web-dist.tar.gz" basedir="${dist-basedir}" compression="gzip" />
		<zip destfile="valve3web-dist.zip" basedir="${dist-basedir}" />	
	</target>	
</project>